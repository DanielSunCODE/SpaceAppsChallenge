<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TEMPO AIR – Panel</title>

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

  <!-- PapaParse & Leaflet -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>

  <style>
    :root{
      --bg:#0b1220;--text:#e9f0ff;--muted:#93a4c2;--card:#0e1525;
      --good:#2ecc71;--regular:#f1c40f;--bad:#e74c3c;--brand:#6fb1ff;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text)}
    a{color:inherit;text-decoration:none}
    html{scroll-behavior:smooth;}

    header{
      position:fixed;top:0;left:0;right:0;height:64px;z-index:20;
      display:flex;align-items:center;justify-content:space-between;
      padding:0 24px;background:linear-gradient(180deg,rgba(0,0,0,.45),rgba(0,0,0,.00));
      backdrop-filter:blur(6px);
    }
    .logo{font-weight:800;letter-spacing:.5px}
    .nav-btn{font-weight:700;font-size:14px;padding:8px 12px;border-radius:12px;text-decoration:none;
      border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.06);margin-left:8px}
    .nav-btn:hover{border-color:rgba(255,255,255,.35)}

    .banner{position:relative;height:52vh;min-height:360px;width:100%;overflow:hidden;text-align:center}
    .banner img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
    .banner .overlay{position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.35),rgba(11,18,32,1) 80%)}
    .title{position:absolute;bottom:24px;left:50%;transform:translateX(-50%);width:min(1200px,92vw);padding:0 20px}
    .title h1{margin:0;font-size:clamp(28px,4.5vw,48px)}
    .title p{margin:6px 0 16px;color:var(--muted)}
    .explore-btn{display:inline-block;background:#d9d9d9;color:#000;font-weight:600;font-size:16px;
      padding:12px 32px;border-radius:999px;text-decoration:none;transition:all 0.3s ease;}
    .explore-btn:hover{background:#fff;transform:translateY(-3px)}

    .hour-strip{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));
      border-top:1px solid rgba(255,255,255,.08);border-bottom:1px solid rgba(255,255,255,.08)}
    .hour-content{max-width:1200px;margin:0 auto;padding:14px 20px;display:grid;grid-template-columns:150px 1fr;gap:16px;align-items:center}
    .hour-label{font-weight:800;color:#cfe3ff}
    .chips{display:flex;gap:8px;overflow:auto;padding-bottom:6px}
    .chip{display:flex;align-items:center;gap:6px;padding:8px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.14);background:#0e1525;white-space:nowrap;font-weight:700;font-size:12px}
    .chip .bi{font-size:14px}

    .section{max-width:1200px;margin:18px auto;padding:0 20px}
    .grid{display:grid;grid-template-columns:1fr 3fr;gap:16px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:14px}
    .card h3{margin:0 0 10px;font-size:16px;color:#cfe3ff}
    .forecast-list{display:grid;gap:10px}
    .day{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-radius:12px;
      background:#0e1525;border:1px solid rgba(255,255,255,.06)}
    .tag{font-size:12px;font-weight:800;padding:4px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.16)}
    #map{height:360px;border-radius:12px}
  </style>
</head>

<body>
  <!-- Header -->
  <header>
    <div class="logo">TEMPO AIR</div>
    <nav>
      <a class="nav-btn" href="#explorar">Explorar mapa</a>
      <a class="nav-btn" href="#">Login</a>
      <a class="nav-btn" href="#">Sign In</a>
    </nav>
  </header>

  <!-- Banner -->
  <section class="banner">
    <img src="./Media/BannerImg.png" alt="Banner">
    <div class="overlay"></div>
    <div class="title">
      <h1>TEMPO AIR</h1>
      <p>Monitorea la calidad del aire con datos satelitales TEMPO y recibe alertas personalizadas para cuidar tu salud y la de tu familia.</p>
      <a href="#explorar" class="explore-btn">Explorar Mapa</a>
    </div>
  </section>

  <!-- Hour Forecast -->
  <section class="hour-strip">
    <div class="hour-content">
      <div class="hour-label">10-Day Forecast</div>
      <div class="chips" id="hourChips"></div>
    </div>
  </section>

  <!-- Predicción y Mapa -->
  <section class="section" id="explorar">
    <div class="grid">
      <div class="card">
        <h3>10-DAY FORECAST</h3>
        <div class="forecast-list" id="forecast"></div>
      </div>
      <div class="card">
        <h3>Mapa de contaminación – Saltillo</h3>
        <div id="map"></div>
      </div>
    </div>
  </section>

  <script>
    // === Clasificación de calidad ===
    function classifyScore(score){
      if(score < 35) return {label:'Good', color:'var(--good)', icon:'bi-heart-fill'};
      if(score > 65) return {label:'Bad', color:'var(--bad)', icon:'bi-exclamation-triangle-fill'};
      return {label:'Regular', color:'var(--regular)', icon:'bi-shield-check'};
    }

    // === Pronóstico por hora (para modelo predictivo) ===
    function renderHourStrip(predicciones = []){
      const cont = document.getElementById('hourChips');
      cont.innerHTML = '';
      const now = new Date();
      for(let i=0; i<10; i++){
        const hour = new Date(now.getTime() + i*60*60*1000);
        const label = i===0 ? 'Now' : `${hour.getHours().toString().padStart(2,'0')}:00`;
        const score = predicciones[i] ?? Math.floor(40 + Math.random()*60);
        const {label:state, color, icon} = classifyScore(score);
        const div = document.createElement('div');
        div.className = 'chip';
        div.style.borderColor = `color-mix(in srgb, ${color} 40%, transparent)`;
        div.innerHTML = `<i class="bi ${icon}"></i> ${label} · ${state} (${score})`;
        cont.appendChild(div);
      }
    }

    // === Pronóstico de 10 días ===
    function renderForecast(predicciones = []){
      const box = document.getElementById('forecast');
      box.innerHTML = '';
      const days = ['Today','Mon','Tue','Wed','Thu','Fri','Sat','Sun','Mon+','Tue+'];
      for(let i=0;i<10;i++){
        const score = predicciones[i] ?? Math.floor(40 + Math.random()*60);
        const c = classifyScore(score);
        const div = document.createElement('div');
        div.className = 'day';
        div.innerHTML = `<strong>${days[i]}</strong><span class="tag" style="border-color:${c.color}">${c.label} · ${score}</span>`;
        box.appendChild(div);
      }
    }

    // === Inicializar mapa ===
    function initMap(){
      const map = L.map('map').setView([25.438,-100.99],12);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:18}).addTo(map);
      const heat = L.heatLayer([[25.438,-100.99,0.6],[25.44,-100.98,0.4]],{radius:25,blur:20}).addTo(map);
    }

    // === Inicialización Demo ===
    document.addEventListener('DOMContentLoaded',()=>{
      renderHourStrip();   // Horas
      renderForecast();    // Días
      initMap();           // Mapa
    });

    // Cuando tengas tu modelo predictivo:
    // renderHourStrip([55,60,70,75,80,78,72,65,58,50]);
    // renderForecast([62,68,74,70,66,60,58,55,52,48]);
  </script>
</body>
</html>
